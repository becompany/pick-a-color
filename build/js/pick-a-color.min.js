/*! Pick-a-Color v1.2.4 | Copyright 2013 Lauren Sperber and Broadstreet Ads https://github.com/lauren/pick-a-color/blob/master/LICENSE | pick-a-color 2014-10-31 */
define(["jquery","tinycolor"],function(a,b){"use strict";a.fn.pickAColor=function(c){var d="ontouchstart"in window,e=(parseInt(a(window).width(),10)<767?!0:!1,"localStorage"in window&&null!==window.localStorage&&"object"==typeof JSON),f=document.all&&!window.atob,g=d?"touchstart.pickAColor":"mousedown.pickAColor",h=d?"touchmove.pickAColor":"mousemove.pickAColor",i=d?"touchend.pickAColor":"mouseup.pickAColor",j=d?"touchend.pickAColor":"click.pickAColor",k="dragging.pickAColor",l="endDrag.pickAColor",m=a.extend({showSpectrum:!0,showSavedColors:!0,saveColorsPerElement:!1,fadeMenuToggle:!0,showAdvanced:!0,showBasicColors:!0,showHexInput:!0,allowBlank:!1,inlineDropdown:!1,placement:"bottom",basicColors:{white:"fff",red:"f00",orange:"f60",yellow:"ff0",green:"008000",blue:"00f",purple:"800080",black:"000"}},c);m.showAdvanced||m.showBasicColors||(m.showBasicColors=!0);var n=m.showSavedColors&&m.showAdvanced||m.showBasicColors&&m.showSavedColors||m.showBasicColors&&m.showAdvanced,o=function(){var b=a("<div>").addClass("input-group-btn"),c=a("<button type='button'>").addClass("btn btn-default color-dropdown dropdown-toggle"),d=a("<span>").addClass("color-preview current-color"),e=a("<span>").addClass("caret"),g=a("<div>").addClass("color-menu dropdown-menu");if("top"===m.placement&&b.addClass("dropup"),m.inlineDropdown&&g.addClass("color-menu--inline"),m.showHexInput||(c.addClass("no-hex"),g.addClass("no-hex")),b.append(c.append(d).append(e)),n||m.showSpectrum||g.addClass("small"),n){var h=a("<div>").addClass("color-menu-tabs"),i=m.showBasicColors?"savedColors-tab tab":"savedColors-tab tab tab-active";m.showBasicColors&&h.append(a("<span>").addClass("basicColors-tab tab tab-active").append(a("<a>").text("Basic Colors"))),m.showSavedColors&&h.append(a("<span>").addClass(i).append(a("<a>").text("Saved Colors"))),m.showAdvanced&&h.append(a("<span>").addClass("advanced-tab tab").append(a("<a>").text("Advanced"))),g.append(h)}if(m.showBasicColors){var j=a("<div>").addClass("basicColors-content active-content");m.showSpectrum&&j.append(a("<h6>").addClass("color-menu-instructions").text("Tap spectrum or drag band to change color"));var k=a("<ul>").addClass("basic-colors-list");a.each(m.basicColors,function(b,c){var d=a("<li>").addClass("color-item"),e=a("<a>").addClass(b+" color-link"),g=a("<span>").addClass("color-preview "+b),h=a("<span>").addClass("color-label").text(b);if(e.append(g,h),g.append(),"#"!==c[0]&&(c="#"+c),g.css("background-color",c),m.showSpectrum){var i=a("<span>").addClass("color-box spectrum-"+b);f&&a.each([0,1],function(d){"fff"!==c&&"000"!==b&&i.append(a("<span>").addClass(b+"-spectrum-"+d+" ie-spectrum"))});var j=a("<span>").addClass("highlight-band");a.each([0,1,2],function(){j.append(a("<span>").addClass("highlight-band-stripe"))}),e.append(i.append(j))}k.append(d.append(e))}),g.append(j.append(k))}if(m.showSavedColors){var l=m.showBasicColors?"inactive-content":"active-content",o=a("<div>").addClass("savedColors-content").addClass(l);o.append(a("<p>").addClass("saved-colors-instructions").text("Type in a color or use the spectrums to lighten or darken an existing color.")),g.append(o)}if(m.showAdvanced){var p=m.showBasicColors||m.showSavedColors?"inactive-content":"active-content",q=a("<div>").addClass("advanced-content").addClass(p).append(a("<h6>").addClass("advanced-instructions").text("Tap spectrum or drag band to change color")),r=a("<ul>").addClass("advanced-list"),s=a("<li>").addClass("hue-item"),t=a("<span>").addClass("hue-text").text("Hue: ").append(a("<span>").addClass("hue-value").text("0")),u=a("<span>").addClass("color-box spectrum-hue");f&&a.each([0,1,2,3,4,5,6],function(b){u.append(a("<span>").addClass("hue-spectrum-"+b+" ie-spectrum hue"))});var v=a("<span>").addClass("highlight-band");a.each([0,1,2],function(){v.append(a("<span>").addClass("highlight-band-stripe"))}),r.append(s.append(t).append(u.append(v)));var w=a("<li>").addClass("lightness-item"),x=a("<span>").addClass("color-box spectrum-lightness"),y=a("<span>").addClass("lightness-text").text("Lightness: ").append(a("<span>").addClass("lightness-value").text("50%"));f&&a.each([0,1],function(b){x.append(a("<span>").addClass("lightness-spectrum-"+b+" ie-spectrum"))});var z=a("<span>").addClass("highlight-band");a.each([0,1,2],function(){z.append(a("<span>").addClass("highlight-band-stripe"))}),r.append(w.append(y).append(x.append(z)));var A=a("<li>").addClass("saturation-item"),B=a("<span>").addClass("color-box spectrum-saturation");f&&a.each([0,1],function(b){B.append(a("<span>").addClass("saturation-spectrum-"+b+" ie-spectrum"))});var C=a("<span>").addClass("highlight-band");a.each([0,1,2],function(){C.append(a("<span>").addClass("highlight-band-stripe"))});var D=a("<span>").addClass("saturation-text").text("Saturation: ").append(a("<span>").addClass("saturation-value").text("100%"));r.append(A.append(D).append(B.append(C)));var E=a("<li>").addClass("preview-item").append(a("<span>").addClass("preview-text").text("Preview")),F=a("<span>").addClass("color-preview advanced").append("<button class='color-select btn btn-mini advanced' type='button'>Select</button>");r.append(E.append(F)),g.append(q.append(r))}return b.append(g),b},p={},q={rowsInDropdown:8,maxColsInDropdown:2};if(m.showSavedColors){var r=[];if(e&&localStorage.allSavedColors)r=JSON.parse(localStorage.allSavedColors);else if(document.cookie.match("pickAColorSavedColors-allSavedColors=")){var s=document.cookie.split(";");a.each(s,function(a){s[a].match("pickAColorSavedColors-allSavedColors=")&&(r=s[a].split("=")[1].split(","))})}}var t={initialize:function(c){var d,e,f=a(this);f.attr("name")||f.attr("name","pick-a-color-"+c),e=f.attr("name"),f.addClass("pick-a-color"),m.allowBlank?f.val().match(/^\s+$|^$/)||(p.defaultColor=b(f.val()).toHex(),p.typedColor=p.defaultColor,f.val(p.defaultColor)):(p.defaultColor=b(f.val()).toHex(),p.typedColor=p.defaultColor,f.val(p.defaultColor)),a(f).wrap('<div class="input-group pick-a-color-markup" id="'+e+'">'),d=a(f.parent()),m.showHexInput?d.prepend('<span class="hex-pound input-group-addon">#</span>').append(o()):d.append(o()),m.showHexInput||f.attr("type","hidden")},updatePreview:function(a){m.allowBlank?(p.typedColor=a.val().match(/^\s+$|^$/)?"":b(a.val()).toHex(),""===p.typedColor?a.siblings(".input-group-btn").find(".current-color").css("background","none"):a.siblings(".input-group-btn").find(".current-color").css("background-color","#"+p.typedColor)):(p.typedColor=b(a.val()).toHex(),a.siblings(".input-group-btn").find(".current-color").css("background-color","#"+p.typedColor))},pressPreviewButton:function(){var a=arguments[0].thisEvent;a.stopPropagation(),t.toggleDropdown(a.target)},openDropdown:function(b,c){a(".color-menu").each(function(){var b=a(this);if("block"===b.css("display")){var c=b.parents(".input-group-btn");t.closeDropdown(c,b)}}),m.fadeMenuToggle&&!d?a(c).fadeIn("fast"):a(c).show(),a(b).addClass("open")},closeDropdown:function(b,c){m.fadeMenuToggle&&!d?a(c).fadeOut("fast"):a(c).css("display","none"),a(b).removeClass("open")},closeDropdownIfOpen:function(){var a=arguments[0].button,b=arguments[0].menu;"block"===b.css("display")&&t.closeDropdown(a,b)},toggleDropdown:function(b){var c=a(b).parents(".pick-a-color-markup"),d=c.find("input"),e=c.find(".input-group-btn"),f=c.find(".color-menu");d.is(":disabled")||"none"!==f.css("display")?t.closeDropdown(e,f):t.openDropdown(e,f)},tabbable:function(){var b=a(this),c=b.parents(".pick-a-color-markup");b.click(function(){var b=a(this),d=b.attr("class").split(" ")[0].split("-")[0]+"-content",e=b.parents(".dropdown-menu").find("."+d);b.hasClass("tab-active")||(c.find(".tab-active").removeClass("tab-active"),c.find(".active-content").removeClass("active-content").addClass("inactive-content"),b.addClass("tab-active"),a(e).addClass("active-content").removeClass("inactive-content"))})},getColorMultiplier:function(b,c,e){var f="basic"===e?parseInt(a(".color-box").first().width(),10):parseInt(a(".advanced-list").find(".color-box").first().width(),10);0===f&&(f="basic"===e?d?160:200:d?160:300);var g=f/2,h=c/f;return"bidirectional"===b?.5>=h?(1-c/g)/2:-((c-g)/g)/2:"darkenRight"===b?-(h/2):h/2},modifyHSLLightness:function(a,c){var d=a;return d.l+=c,d.l=Math.min(Math.max(0,d.l),1),b(d).toHslString()},getMoveableArea:function(a){var b={},c=a.parent(),d=a.outerWidth(),e=c.width(),f=c.offset();return b.minX=f.left,b.maxX=e-d,b},moveHighlightBand:function(b,c,e){var f=a(".highlight-band").first().outerWidth(),g=.75*f,h=d?e.originalEvent.pageX:e.pageX,i=h-c.minX-g;i=Math.max(0,Math.min(i,c.maxX)),b.css("position","absolute"),b.css("left",i)},horizontallyDraggable:function(){a(this).on(g,function(b){b.preventDefault();var c=a(b.delegateTarget);c.css("cursor","-webkit-grabbing"),c.css("cursor","-moz-grabbing");var d=t.getMoveableArea(c);a(document).on(h,function(a){c.trigger(k),t.moveHighlightBand(c,d,a)}).on(i,function(){a(document).off(h),a(document).off(k),c.css("cursor","-webkit-grab"),c.css("cursor","-moz-grab"),c.trigger(l),a(document).off(i)})}).on(i,function(b){b.stopPropagation(),a(document).off(h),a(document).off(k)})},modifyHighlightBand:function(a,b,c){var d={h:0,s:0,l:.05},e={h:0,s:0,l:.5},f=-b,g=a.find(".highlight-band-stripe"),h="lightenRight"===c?t.modifyHSLLightness(e,f):t.modifyHSLLightness(d,f);a.css("border-color",h),g.css("background-color",h)},calculateHighlightedColor:function(){var c,d,e,f,g,h,i,j,k=a(this),l=k.parent(),n=a(".highlight-band").first().outerWidth(),o=n/2,p=arguments[0].type;if("basic"===p){var q=l.attr("class").split("-")[2],r=m.basicColors[q];switch(d=b(r).toHsl(),r){case"fff":c="darkenRight";break;case"000":c="lightenRight";break;default:c="bidirectional"}}else{var s=k.parents(".advanced-list");f=arguments[0].hsl.s,i=s.find(".spectrum-hue"),e=arguments[0].hsl.h,h=s.find(".spectrum-saturation"),j=s.find(".lightness-value"),g=s.find(".color-preview"),d={h:arguments[0].hsl.h,l:.5,s:arguments[0].hsl.s},c="bidirectional"}var u=parseInt(k.css("left"),10)+o,v=t.getColorMultiplier(c,u,p),w=t.modifyHSLLightness(d,v),x="#"+b(w).toHex(),y=w.split("(")[1].split(")")[0].split(",")[2],z=parseInt(y.split("%")[0],10)/100;return"basic"===p?(l.siblings(".color-preview").css("background-color",x),l.prev(".color-label").replaceWith('<button class="color-select btn btn-mini" type="button">Select</button>'),"darkenRight"!==c&&t.modifyHighlightBand(k,v,c)):(g.css("background-color",x),j.text(y),t.updateSaturationStyles(h,e,z),t.updateHueStyles(i,f,z),t.modifyHighlightBand(a(".advanced-content .highlight-band"),v,c)),"basic"===p?b(w).toHex():z},updateSavedColorPreview:function(b){a.each(b,function(c){var d=a(b[c]),e=d.attr("class");d.find(".color-preview").css("background-color",e)})},updateSavedColorMarkup:function(b,c){if(c=c?c:r,m.showSavedColors&&c.length>0){m.saveColorsPerElement||(b=a(".savedColors-content"),c=r);var d=q.rowsInDropdown*q.maxColsInDropdown;c=c.slice(0,d);var e=a("<ul>").addClass("saved-color-col 0"),f=a("<ul>").addClass("saved-color-col 1");a.each(c,function(b,c){var d=a("<li>").addClass("color-item"),g=a("<a>").addClass(c);g.append(a("<span>").addClass("color-preview")),g.append(a("<span>").addClass("color-label").text(c)),d.append(g),b%2===0?e.append(d):f.append(d)}),b.html(e),b.append(f);var g=a(b).find("a");t.updateSavedColorPreview(g)}},setSavedColorsCookie:function(a,b){var c=new Date,d=31536e7,e=new Date(c.getTime()+d);e=e.toGMTString(),document.cookie="undefined"==typeof b?"pickAColorSavedColors-allSavedColors="+a+";expires="+e:"pickAColorSavedColors-"+b+"="+a+"; expires="+e},saveColorsToLocalStorage:function(a,b){if(e)if("undefined"==typeof b)try{localStorage.allSavedColors=JSON.stringify(a)}catch(c){localStorage.clear()}else try{localStorage["pickAColorSavedColors-"+b]=JSON.stringify(a)}catch(c){localStorage.clear()}else t.setSavedColorsCookie(a,b)},removeFromArray:function(b,c){-1!==a.inArray(c,b)&&b.splice(a.inArray(c,b),1)},updateSavedColors:function(a,b,c){t.removeFromArray(b,a),b.unshift(a),t.saveColorsToLocalStorage(b,c)},addToSavedColors:function(a,b,c){if(m.showSavedColors&&void 0!==a)if("#"!=a[0]&&(a="#"+a),t.updateSavedColors(a,r),m.saveColorsPerElement){var d=b.colors,e=b.dataAttr;t.updateSavedColors(a,d,e),t.updateSavedColorMarkup(c,d)}else t.updateSavedColorMarkup(c,r)},selectFromBasicColors:function(){var c=a(this).find("span:first").css("background-color"),d=arguments[0].els,e=arguments[0].savedColorsInfo;c=b(c).toHex(),a(d.thisEl).val(c),a(d.thisEl).trigger("change"),t.updatePreview(d.thisEl),t.addToSavedColors(c,e,d.savedColorsContent),t.closeDropdown(d.colorPreviewButton,d.colorMenu)},tapSpectrum:function(){var b=arguments[0].thisEvent,c=arguments[0].savedColorsInfo,e=arguments[0].els,f=arguments[0].mostRecentClick;b.stopPropagation();var g=a(this).find(".highlight-band"),h=t.getMoveableArea(g);d?t.moveHighlightBand(g,h,f):t.moveHighlightBand(g,h,b);var i=t.calculateHighlightedColor.apply(g,[{type:"basic"}]);t.addToSavedColors(i,c,e.savedColorsContent),e.touchInstructions.html("Press 'select' to choose this color")},executeUnlessScrolled:function(){var b,c,e=arguments[0].thisFunction,f=arguments[0].theseArguments;a(this).on(g,function(d){b=a(window).scrollTop(),c=d}).on(j,function(g){var h=b-a(window).scrollTop();return d&&Math.abs(h)>0?!1:(f.thisEvent=g,f.mostRecentClick=c,e.apply(a(this),[f]),void 0)})},updateSaturationStyles:function(c,d,e){var g=(100*e).toString()+"%",h="#"+b("hsl("+d+",0%,"+g).toHex(),i="#"+b("hsl("+d+",50%,"+g).toHex(),j="#"+b("hsl("+d+",100%,"+g).toHex(),k="",l=(a.each(["-webkit-linear-gradient","-o-linear-gradient"],function(a,b){k+="background-image: "+b+"(left, "+h+" 0%, "+i+" 50%, "+j+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+h+"', endColorstr='"+i+"', GradientType=1)"),m="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+j+"', GradientType=1)";if(k="background-image: -moz-linear-gradient(left center, "+h+" 0%, "+i+" 50%, "+j+" 100%);background-image: linear-gradient(to right, "+h+" 0%, "+i+" 50%, "+j+" 100%); background-image: -webkit-gradient(linear, left top, right top,color-stop(0, "+h+"),color-stop(0.5, "+i+"),color-stop(1, "+j+"));"+k,f){var n=a(c).find(".saturation-spectrum-0"),o=a(c).find(".saturation-spectrum-1");n.css("filter",l),o.css("filter",m)}else c.attr("style",k)},updateLightnessStyles:function(c,d,e){var g=(100*e).toString()+"%",h="#"+b("hsl("+d+","+g+",100%)").toHex(),i="#"+b("hsl("+d+","+g+",50%)").toHex(),j="#"+b("hsl("+d+","+g+",0%)").toHex(),k="",l=(a.each(["-webkit-linear-gradient","-o-linear-gradient"],function(a,b){k+="background-image: "+b+"(left, "+h+" 0%, "+i+" 50%, "+j+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+h+"', endColorstr='"+i+"', GradientType=1)"),m="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+j+"', GradientType=1)";if(k="background-image: -moz-linear-gradient(left center, "+h+" 0%, "+i+" 50%, "+j+" 100%); background-image: linear-gradient(to right, "+h+" 0%, "+i+" 50%, "+j+" 100%); background-image: -webkit-gradient(linear, left top, right top, color-stop(0, "+h+"), color-stop(0.5, "+i+"), color-stop(1, "+j+")); "+k,f){var n=a(c).find(".lightness-spectrum-0"),o=a(c).find(".lightness-spectrum-1");n.css("filter",l),o.css("filter",m)}else c.attr("style",k)},updateHueStyles:function(c,d,e){{var g=(100*d).toString()+"%",h=(100*e).toString()+"%",i="#"+b("hsl(0,"+g+","+h+")").toHex(),j="#"+b("hsl(60,"+g+","+h+")").toHex(),k="#"+b("hsl(120,"+g+","+h+")").toHex(),l="#"+b("hsl(180,"+g+","+h+")").toHex(),m="#"+b("hsl(240,"+g+","+h+")").toHex(),n="#"+b("hsl(300,"+g+","+h+")").toHex(),o="#"+b("hsl(0,"+g+","+h+")").toHex(),p="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+j+"', GradientType=1)",q="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+j+"', endColorstr='"+k+"', GradientType=1)",r="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+k+"', endColorstr='"+l+"', GradientType=1)",s="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+l+"', endColorstr='"+m+"', GradientType=1)",t="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+m+"', endColorstr='"+n+"', GradientType=1)",u="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+n+"', endColorstr='"+o+"', GradientType=1)",v="";a.each(["-webkit-linear-gradient","-o-linear-gradient"],function(a,b){v+="background-image: "+b+"(left, "+i+" 0%, "+j+" 17%, "+k+" 24%, "+l+" 51%, "+m+" 68%, "+n+" 85%, "+o+" 100%);"})}if(v+="background-image: -webkit-gradient(linear, left top, right top,color-stop(0%, "+i+"),color-stop(17%, "+j+"),color-stop(34%, "+k+"),color-stop(51%, "+l+"),color-stop(68%, "+m+"),color-stop(85%, "+n+"),color-stop(100%, "+o+"));background-image: linear-gradient(to right, "+i+" 0%, "+j+" 17%, "+k+" 24%,"+l+" 51%,"+m+" 68%,"+n+" 85%,"+o+" 100%); background-image: -moz-linear-gradient(left center, "+i+" 0%, "+j+" 17%, "+k+" 24%, "+l+" 51%, "+m+" 68%, "+n+" 85%, "+o+" 100%);",f){var w=a(c).find(".hue-spectrum-0"),x=a(c).find(".hue-spectrum-1"),y=a(c).find(".hue-spectrum-2"),z=a(c).find(".hue-spectrum-3"),A=a(c).find(".hue-spectrum-4"),B=a(c).find(".hue-spectrum-5");w.css("filter",p),x.css("filter",q),y.css("filter",r),z.css("filter",s),A.css("filter",t),B.css("filter",u)}else c.attr("style",v)},getHighlightedHue:function(){var c=a(this),e=c.outerWidth(),f=e/2,g=parseInt(c.css("left"),10)+f,h=c.parents(".advanced-list"),i=h.find(".color-preview"),j=h.find(".spectrum-lightness"),k=h.find(".spectrum-saturation"),l=parseInt(h.find(".color-box").first().width(),10),m=h.find(".hue-value"),n=arguments[0].l,o=arguments[0].s,p=(100*o).toString()+"%",q=(100*n).toString()+"%";0===l&&(l=d?160:300);var r=Math.floor(g/l*360),s="hsl("+r+","+p+","+q+")";return s="#"+b(s).toHex(),i.css("background-color",s),m.text(r),t.updateLightnessStyles(j,r,o),t.updateSaturationStyles(k,r,n),r},getHighlightedSaturation:function(){var c=a(this),e=c.outerWidth(),f=e/2,g=parseInt(c.css("left"),10)+f,h=c.parents(".advanced-list"),i=h.find(".color-preview"),j=h.find(".spectrum-lightness"),k=h.find(".spectrum-hue"),l=h.find(".saturation-value"),m=parseInt(h.find(".color-box").first().width(),10),n=arguments[0].l,o=(100*n).toString()+"%",p=arguments[0].h;0===m&&(m=d?160:300);var q=g/m,r=Math.round(100*q).toString()+"%",s="hsl("+p+","+r+","+o+")";return s="#"+b(s).toHex(),i.css("background-color",s),l.text(r),t.updateLightnessStyles(j,p,q),t.updateHueStyles(k,q,n),q},updateAdvancedInstructions:function(a){a.html("Press the color preview to choose this color")}};return this.each(function(c){t.initialize.apply(this,[c]);var d,f,g={thisEl:a(this),thisWrapper:a(this).parent(),colorTextInput:a(this).find("input"),colorMenuLinks:a(this).parent().find(".color-menu li a"),colorPreviewButton:a(this).parent().find(".input-group-btn"),colorMenu:a(this).parent().find(".color-menu"),colorSpectrums:a(this).parent().find(".color-box"),basicSpectrums:a(this).parent().find(".basicColors-content .color-box"),touchInstructions:a(this).parent().find(".color-menu-instructions"),advancedInstructions:a(this).parent().find(".advanced-instructions"),highlightBands:a(this).parent().find(".highlight-band"),basicHighlightBands:a(this).parent().find(".basicColors-content .highlight-band")};if(n&&(g.tabs=g.thisWrapper.find(".tab")),m.showSavedColors&&(g.savedColorsContent=g.thisWrapper.find(".savedColors-content"),m.saveColorsPerElement))if(f={colors:[],dataObj:a(this).data()},a.each(f.dataObj,function(a){f.dataAttr=a}),e&&localStorage["pickAColorSavedColors-"+f.dataAttr])f.colors=JSON.parse(localStorage["pickAColorSavedColors-"+f.dataAttr]);else if(document.cookie.match("pickAColorSavedColors-"+f.dataAttr))for(var h=document.cookie.split(";"),o=0;o<h.length;o++)h[o].match(f.dataAttr)&&(f.colors=h[o].split("=")[1].split(","));else f.colors=r;m.showAdvanced&&(d={h:0,s:1,l:.5},g.advancedSpectrums=g.thisWrapper.find(".advanced-list").find(".color-box"),g.advancedHighlightBands=g.thisWrapper.find(".advanced-list").find(".highlight-band"),g.hueSpectrum=g.thisWrapper.find(".spectrum-hue"),g.lightnessSpectrum=g.thisWrapper.find(".spectrum-lightness"),g.saturationSpectrum=g.thisWrapper.find(".spectrum-saturation"),g.hueHighlightBand=g.thisWrapper.find(".spectrum-hue .highlight-band"),g.lightnessHighlightBand=g.thisWrapper.find(".spectrum-lightness .highlight-band"),g.saturationHighlightBand=g.thisWrapper.find(".spectrum-saturation .highlight-band"),g.advancedPreview=g.thisWrapper.find(".advanced-content .color-preview")),t.addToSavedColors(p.defaultColor,f,g.savedColorsContent),t.updatePreview(g.thisEl),g.thisEl.focus(function(){var b=a(this);p.typedColor=b.val(),m.allowBlank||b.val(""),t.toggleDropdown(g.colorPreviewButton,g.ColorMenu)}).blur(function(){var c=a(this);p.newValue=c.val(),p.newValue.match(/^\s+$|^$/)?m.allowBlank||c.val(p.typedColor):(p.newValue=b(p.newValue).toHex(),c.val(p.newValue),t.addToSavedColors(p.newValue,f,g.savedColorsContent)),t.toggleDropdown(g.colorPreviewButton,g.ColorMenu),t.updatePreview(c)}),t.executeUnlessScrolled.apply(g.colorPreviewButton,[{thisFunction:t.pressPreviewButton,theseArguments:{}}]),t.executeUnlessScrolled.apply(a(document),[{thisFunction:t.closeDropdownIfOpen,theseArguments:{button:g.colorPreviewButton,menu:g.colorMenu}}]),g.colorMenu.on(j,function(a){a.stopPropagation()}),g.thisEl.on(j,function(a){a.stopPropagation()}),t.executeUnlessScrolled.apply(g.colorMenuLinks,[{thisFunction:t.selectFromBasicColors,theseArguments:{els:g,savedColorsInfo:f}}]),n&&t.tabbable.apply(g.tabs),(m.showSpectrum||m.showAdvanced)&&t.horizontallyDraggable.apply(g.highlightBands),m.showSpectrum&&(t.executeUnlessScrolled.apply(g.basicSpectrums,[{thisFunction:t.tapSpectrum,theseArguments:{savedColorsInfo:f,els:g}}]),a(g.basicHighlightBands).on(k,function(a){a.target;t.calculateHighlightedColor.apply(this,[{type:"basic"}])}).on(l,function(a){var b=a.delegateTarget,c=t.calculateHighlightedColor.apply(b,[{type:"basic"}]);t.addToSavedColors(c,f,g.savedColorsContent)})),m.showAdvanced&&(a(g.hueHighlightBand).on(k,function(){d.h=t.getHighlightedHue.apply(this,[d])}),a(g.lightnessHighlightBand).on(k,function(){t.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:d}])}).on(i,function(){d.l=t.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:d}])}),a(g.saturationHighlightBand).on(k,function(){t.getHighlightedSaturation.apply(this,[d])}).on(l,function(){d.s=t.getHighlightedSaturation.apply(this,[d])}),a(g.advancedHighlightBand).on(l,function(){t.updateAdvancedInstructions(g.advancedInstructions)}),a(g.lightnessSpectrum).click(function(b){b.stopPropagation();var c=a(this).find(".highlight-band"),e=t.getMoveableArea(c);t.moveHighlightBand(c,e,b),d.l=t.calculateHighlightedColor.apply(c,[{type:"advanced",hsl:d}])}),a(g.hueSpectrum).click(function(b){b.stopPropagation();var c=a(this).find(".highlight-band"),e=t.getMoveableArea(c);t.moveHighlightBand(c,e,b),d.h=t.getHighlightedHue.apply(c,[d])}),a(g.saturationSpectrum).click(function(b){b.stopPropagation();var c=a(this).find(".highlight-band"),e=t.getMoveableArea(c);t.moveHighlightBand(c,e,b),d.s=t.getHighlightedSaturation.apply(c,[d])}),a(g.advancedSpectrums).click(function(){t.updateAdvancedInstructions(g.advancedInstructions)}),a(g.advancedPreview).click(function(){var c=b(a(this).css("background-color")).toHex();a(g.thisEl).val(c),a(g.thisEl).trigger("change"),t.updatePreview(g.thisEl),t.addToSavedColors(c,f,g.savedColorsContent),t.closeDropdown(g.colorPreviewButton,g.colorMenu)})),m.showSavedColors&&(a(g.savedColorsContent).click(function(b){var c=a(b.target);if(c.is("SPAN")||c.is("A")){var d=c.is("SPAN")?c.parent().attr("class").split("#")[1]:c.attr("class").split("#")[1];a(g.thisEl).val(d),a(g.thisEl).trigger("change"),t.updatePreview(g.thisEl),t.closeDropdown(g.colorPreviewButton,g.colorMenu),t.addToSavedColors(d,f,g.savedColorsContent)}}),m.saveColorsPerElement?m.saveColorsPerElement&&t.updateSavedColorMarkup(g.savedColorsContent,f.colors):t.updateSavedColorMarkup(g.savedColorsContent,r))})}});